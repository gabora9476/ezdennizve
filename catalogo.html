<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>EzDenniz Shop - Style & Essence</title>
    
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <link rel="icon" href="https://i.ibb.co/Y4yVWpZd/1logo-gold.png" type="image/png">
    
    <style>
        :root {
            /* Colores El√©ctricos del Index */
            --electric-blue: #00f2ff;
            --electric-glow: rgba(0, 242, 255, 0.6);
            --dark-bg: #05070a;
            --gold-accent: #ffb400;
            
            /* Variables Din√°micas (se actualizan con JS) */
            --primary-color: #00f2ff;
            --accent-color: #ffb400;
            
            /* Sistema Glassmorphism Mejorado */
            --glass-bg: rgba(10, 20, 30, 0.7);
            --glass-border: rgba(0, 242, 255, 0.2);
            --glass-blur: blur(20px);
            --text-main: #ffffff;
            --text-muted: #a0a0a0;
            --radius: 20px;
        }

        /* --- UI GLOBAL & ANTI-ROBO --- */
        body { 
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            
            background-color: var(--dark-bg);
            background: radial-gradient(circle at center, #0a192f 0%, #05070a 100%);
            color: var(--text-main); 
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
            margin: 0; 
            padding: 0; 
            font-family: 'Poppins', sans-serif;
            -webkit-tap-highlight-color: transparent;
        }
        
        img { 
            pointer-events: none;
            -webkit-user-drag: none;
        }

        * { box-sizing: border-box; }

        /* --- ORBES DE FONDO CON EFECTO EL√âCTRICO --- */
        .background-orb { 
            position: fixed; 
            border-radius: 50%; 
            filter: blur(100px); 
            z-index: -1; 
            animation: floatOrb 15s infinite alternate; 
        }
        .orb-1 { 
            width: 350px; height: 350px; 
            background: var(--electric-blue); 
            top: -100px; left: -100px; 
            opacity: 0.15; 
        }
        .orb-2 { 
            width: 300px; height: 300px; 
            background: var(--gold-accent); 
            bottom: 10%; right: -100px; 
            opacity: 0.1; 
            animation-delay: -7s; 
        }

        @keyframes floatOrb { 
            from { transform: translate(0, 0) scale(1); } 
            to { transform: translate(40px, 60px) scale(1.1); } 
        }

        /* --- HEADER CON GLASSMORPHISM --- */
        header {
            background: rgba(10, 20, 30, 0.85);
            backdrop-filter: var(--glass-blur);
            -webkit-backdrop-filter: var(--glass-blur);
            padding: 15px 25px;
            position: sticky;
            top: 0;
            z-index: 100;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--glass-border);
            box-shadow: 0 4px 30px rgba(0, 242, 255, 0.1);
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo-img {
            height: 35px;
            width: auto;
            filter: drop-shadow(0 0 8px var(--electric-blue));
            animation: logoFloat 4s ease-in-out infinite;
        }

        @keyframes logoFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .logo-text { 
            font-size: 1.2rem; 
            font-weight: 800; 
            background: linear-gradient(45deg, var(--electric-blue), var(--gold-accent));
            -webkit-background-clip: text; 
            -webkit-text-fill-color: transparent; 
            letter-spacing: 1.5px;
            text-transform: uppercase;
            text-shadow: 0 0 20px var(--electric-glow);
        }

        .logo-subtitle {
            font-size: 0.5rem;
            color: var(--electric-blue);
            letter-spacing: 0.3em;
            text-transform: uppercase;
            margin-top: -5px;
            opacity: 0.8;
        }
        
        .header-icons { position: relative; }
        .header-icons i { 
            font-size: 1.3rem; 
            margin-left: 20px; 
            color: #fff; 
            cursor: pointer; 
            transition: all 0.3s; 
            pointer-events: auto; 
        }
        
        .header-icons i:hover { 
            color: var(--electric-blue);
            filter: drop-shadow(0 0 8px var(--electric-glow));
            transform: scale(1.15);
        }
        
        .cart-count { 
            position: absolute; top: -5px; right: -8px; 
            background: var(--gold-accent);
            font-size: 0.65rem; padding: 2px 6px; 
            border-radius: 10px; font-weight: bold; 
            box-shadow: 0 0 12px var(--gold-accent); 
        }

        /* --- CONTENEDOR PRINCIPAL --- */
        .container { 
            padding: 20px; 
            max-width: 1200px; 
            margin: 0 auto; 
            flex: 1; width: 100%; 
        }
        
        /* FILTROS CON EFECTO EL√âCTRICO */
        .filters { 
            display: flex; gap: 12px; 
            overflow-x: auto; padding-bottom: 15px; 
            margin-bottom: 10px; 
            scrollbar-width: none; pointer-events: auto; 
        }
        .filters::-webkit-scrollbar { display: none; }
        
        .filter-btn { 
            background: rgba(255, 255, 255, 0.05);
            color: var(--text-muted); 
            border: 1px solid var(--glass-border);
            padding: 10px 20px; border-radius: 30px; 
            white-space: nowrap; cursor: pointer; 
            transition: all 0.3s; 
            backdrop-filter: blur(5px);
            font-size: 0.9rem;
        }
        
        .filter-btn.active { 
            background: linear-gradient(135deg, var(--electric-blue), var(--gold-accent));
            color: white; 
            border: none; 
            box-shadow: 0 0 20px var(--electric-glow);
            font-weight: 600;
        }

        .filter-btn:hover:not(.active) {
            background: rgba(0, 242, 255, 0.15);
            border-color: var(--electric-blue);
            box-shadow: 0 0 15px var(--electric-glow);
        }

        /* GRID PRODUCTOS CON EFECTO GLASSMORPHISM */
        .grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); 
            gap: 20px; 
        }
        
        .product-card { 
            background: rgba(10, 20, 30, 0.6);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius); 
            overflow: hidden; position: relative; 
            transition: all 0.3s; 
            backdrop-filter: blur(10px);
            cursor: pointer; pointer-events: auto;
        }
        
        .product-card:hover { 
            transform: translateY(-8px); 
            box-shadow: 0 0 25px var(--electric-glow);
            border-color: var(--electric-blue); 
            background: rgba(10, 20, 30, 0.8);
        }
        .product-card:active { transform: scale(0.98); }
        
        .badge-new { 
            position: absolute; top: 10px; left: 10px; 
            background: var(--gold-accent);
            color: black; padding: 4px 10px; 
            border-radius: 20px; font-size: 0.7rem; 
            font-weight: bold; z-index: 2; 
            box-shadow: 0 0 10px var(--gold-accent);
        }
        
        .badge-sold { 
            position: absolute; top: 10px; right: 10px; 
            background: rgba(255, 0, 0, 0.8); 
            color: white; padding: 4px 10px; 
            border-radius: 20px; font-size: 0.7rem; 
            font-weight: bold; z-index: 2; 
        }

        .product-img-container { 
            position: relative; 
            height: 200px; 
            overflow: hidden; 
            background: rgba(0, 0, 0, 0.3);
        }
        
        .product-img { 
            width: 100%; 
            height: 100%; 
            object-fit: cover; 
            transition: 0.5s; 
        }
        
        .product-card:hover .product-img { 
            transform: scale(1.15); 
        }

        .product-info { 
            padding: 12px; 
        }
        
        .product-name { 
            font-size: 0.95rem; 
            font-weight: 600; 
            margin-bottom: 5px; 
            display: -webkit-box; 
            -webkit-line-clamp: 2; 
            -webkit-box-orient: vertical; 
            overflow: hidden;
            color: white;
        }
        
        .product-price { 
            font-size: 1.2rem; 
            font-weight: 800; 
            background: linear-gradient(45deg, var(--electric-blue), var(--gold-accent));
            -webkit-background-clip: text; 
            -webkit-text-fill-color: transparent;
        }
        
        .btn-add-cart { 
            width: 100%; 
            background: rgba(0, 242, 255, 0.1);
            border: 1px solid var(--electric-blue);
            color: white; 
            padding: 10px; 
            border-radius: 15px; 
            cursor: pointer; 
            font-weight: 600; 
            margin-top: 8px; 
            transition: all 0.3s; 
            font-size: 0.85rem;
        }
        
        .btn-add-cart:hover { 
            background: var(--electric-blue);
            color: black;
            box-shadow: 0 0 20px var(--electric-glow);
            transform: translateY(-2px);
        }

        /* --- MODAL CON GLASSMORPHISM MEJORADO --- */
        .modal { 
            position: fixed; 
            top: 0; left: 0; 
            width: 100%; height: 100%; 
            background: rgba(0, 0, 0, 0.9); 
            z-index: 200; 
            display: none; 
            align-items: center; 
            justify-content: center; 
            padding: 20px; 
            backdrop-filter: blur(5px);
        }
        
        .modal.active { display: flex; }
        
        .modal-content { 
            background: rgba(10, 20, 30, 0.95);
            backdrop-filter: var(--glass-blur);
            -webkit-backdrop-filter: var(--glass-blur);
            border: 1px solid var(--glass-border);
            border-radius: 25px; 
            max-width: 500px; 
            width: 100%; 
            max-height: 90vh; 
            overflow-y: auto; 
            position: relative; 
            pointer-events: auto;
            box-shadow: 0 0 50px var(--electric-glow);
        }

        .modal-header { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            padding: 20px; 
            border-bottom: 1px solid var(--glass-border);
            position: sticky;
            top: 0;
            background: rgba(10, 20, 30, 0.95);
            backdrop-filter: var(--glass-blur);
            z-index: 10;
        }
        
        .modal-title { 
            font-size: 1.3rem; 
            font-weight: 700;
            background: linear-gradient(45deg, var(--electric-blue), var(--gold-accent));
            -webkit-background-clip: text; 
            -webkit-text-fill-color: transparent;
        }
        
        .close-btn { 
            background: rgba(255, 0, 0, 0.2);
            border: 1px solid rgba(255, 0, 0, 0.5);
            color: white; 
            width: 35px; 
            height: 35px; 
            border-radius: 50%; 
            cursor: pointer; 
            transition: 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .close-btn:hover { 
            background: rgba(255, 0, 0, 0.5);
            box-shadow: 0 0 15px rgba(255, 0, 0, 0.5);
            transform: rotate(90deg);
        }

        .modal-body { 
            padding: 20px; 
        }

        /* GALER√çA DE IM√ÅGENES */
        .image-gallery { 
            position: relative; 
            height: 300px; 
            border-radius: 20px; 
            overflow: hidden; 
            margin-bottom: 15px;
            background: rgba(0, 0, 0, 0.3);
        }
        
        .gallery-img { 
            width: 100%; 
            height: 100%; 
            object-fit: contain; 
            display: none; 
        }
        
        .gallery-img.active { display: block; }
        
        .gallery-nav { 
            position: absolute; 
            top: 50%; 
            transform: translateY(-50%); 
            background: rgba(0, 242, 255, 0.3);
            border: none; 
            color: white; 
            width: 40px; 
            height: 40px; 
            border-radius: 50%; 
            cursor: pointer; 
            transition: 0.3s;
            backdrop-filter: blur(5px);
        }
        
        .gallery-nav:hover { 
            background: var(--electric-blue);
            box-shadow: 0 0 15px var(--electric-glow);
        }
        
        .gallery-nav.prev { left: 10px; }
        .gallery-nav.next { right: 10px; }

        .gallery-dots { 
            display: flex; 
            justify-content: center; 
            gap: 8px; 
            margin: 10px 0; 
        }
        
        .dot { 
            width: 8px; 
            height: 8px; 
            border-radius: 50%; 
            background: rgba(255, 255, 255, 0.3); 
            cursor: pointer; 
            transition: 0.3s; 
        }
        
        .dot.active { 
            background: var(--electric-blue);
            box-shadow: 0 0 10px var(--electric-glow);
            width: 25px; 
            border-radius: 5px; 
        }

        /* DETALLES PRODUCTO */
        .product-detail-price { 
            font-size: 2rem; 
            font-weight: 900; 
            background: linear-gradient(45deg, var(--electric-blue), var(--gold-accent));
            -webkit-background-clip: text; 
            -webkit-text-fill-color: transparent;
            margin: 15px 0;
            text-shadow: 0 0 20px var(--electric-glow);
        }
        
        .product-desc { 
            color: var(--text-muted); 
            line-height: 1.6; 
            margin-bottom: 15px; 
        }

        /* SELECTORES DE VARIANTES */
        .variant-section { 
            margin: 15px 0; 
        }
        
        .variant-label { 
            font-size: 0.9rem; 
            font-weight: 600; 
            margin-bottom: 8px; 
            color: var(--electric-blue);
        }
        
        .variant-options { 
            display: flex; 
            flex-wrap: wrap; 
            gap: 8px; 
        }
        
        .variant-btn { 
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            color: white; 
            padding: 8px 15px; 
            border-radius: 12px; 
            cursor: pointer; 
            transition: 0.3s; 
        }
        
        .variant-btn.selected { 
            background: var(--electric-blue);
            color: black;
            border-color: var(--electric-blue);
            font-weight: 700;
            box-shadow: 0 0 15px var(--electric-glow);
        }

        .variant-btn:hover:not(.selected) {
            background: rgba(0, 242, 255, 0.15);
            border-color: var(--electric-blue);
        }

        /* BOTONES PRINCIPALES */
        .btn-primary { 
            width: 100%; 
            background: linear-gradient(135deg, var(--electric-blue), var(--gold-accent));
            color: black; 
            font-weight: 800; 
            padding: 15px; 
            border-radius: 15px; 
            border: none; 
            cursor: pointer; 
            font-size: 1rem; 
            transition: all 0.3s;
            box-shadow: 0 0 20px var(--electric-glow);
        }
        
        .btn-primary:hover { 
            transform: translateY(-3px);
            box-shadow: 0 0 30px var(--electric-glow);
        }

        .btn-secondary { 
            width: 100%; 
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            color: white; 
            font-weight: 600; 
            padding: 12px; 
            border-radius: 12px; 
            cursor: pointer; 
            transition: 0.3s; 
            margin-top: 10px;
        }
        
        .btn-secondary:hover { 
            background: rgba(0, 242, 255, 0.15);
            border-color: var(--electric-blue);
            box-shadow: 0 0 15px var(--electric-glow);
        }

        /* --- CARRITO --- */
        .cart-item { 
            display: flex; 
            gap: 12px; 
            padding: 12px; 
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--glass-border);
            border-radius: 15px; 
            margin-bottom: 10px; 
            transition: 0.3s;
        }

        .cart-item:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--electric-blue);
        }
        
        .cart-item-img { 
            width: 70px; 
            height: 70px; 
            object-fit: cover; 
            border-radius: 10px; 
        }
        
        .cart-item-info { 
            flex: 1; 
        }
        
        .cart-item-name { 
            font-weight: 600; 
            margin-bottom: 5px; 
        }
        
        .cart-item-price { 
            color: var(--electric-blue);
            font-weight: 700; 
        }
        
        .cart-item-qty { 
            display: flex; 
            gap: 8px; 
            align-items: center; 
            margin-top: 8px; 
        }
        
        .qty-btn { 
            background: rgba(0, 242, 255, 0.2);
            border: 1px solid var(--electric-blue);
            color: white; 
            width: 28px; 
            height: 28px; 
            border-radius: 50%; 
            cursor: pointer; 
            transition: 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .qty-btn:hover { 
            background: var(--electric-blue);
            color: black;
            box-shadow: 0 0 10px var(--electric-glow);
        }
        
        .btn-remove { 
            background: rgba(255, 0, 0, 0.2);
            border: 1px solid rgba(255, 0, 0, 0.5);
            color: white; 
            padding: 6px 12px; 
            border-radius: 8px; 
            cursor: pointer; 
            font-size: 0.8rem; 
            transition: 0.3s;
        }
        
        .btn-remove:hover { 
            background: rgba(255, 0, 0, 0.5);
            box-shadow: 0 0 10px rgba(255, 0, 0, 0.5);
        }

        .cart-summary { 
            border-top: 1px solid var(--glass-border);
            padding-top: 15px; 
            margin-top: 15px; 
        }
        
        .cart-total { 
            display: flex; 
            justify-content: space-between; 
            font-size: 1.5rem; 
            font-weight: 800; 
            margin: 15px 0;
        }

        .cart-total .total-amount {
            background: linear-gradient(45deg, var(--electric-blue), var(--gold-accent));
            -webkit-background-clip: text; 
            -webkit-text-fill-color: transparent;
        }

        /* --- FOOTER --- */
        footer { 
            background: rgba(10, 20, 30, 0.85);
            backdrop-filter: var(--glass-blur);
            border-top: 1px solid var(--glass-border);
            padding: 30px 20px; 
            text-align: center;
            box-shadow: 0 -4px 30px rgba(0, 242, 255, 0.1);
        }
        
        .footer-socials { 
            display: flex; 
            justify-content: center; 
            gap: 15px; 
            margin-bottom: 20px; 
        }
        
        .social-btn { 
            width: 45px; 
            height: 45px; 
            border-radius: 50%; 
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            color: var(--electric-blue);
            display: flex; 
            align-items: center; 
            justify-content: center; 
            cursor: pointer; 
            transition: all 0.3s;
            text-decoration: none;
        }
        
        .social-btn:hover { 
            background: var(--electric-blue);
            color: black;
            transform: scale(1.2) translateY(-5px);
            box-shadow: 0 0 20px var(--electric-glow);
        }

        .footer-text { 
            color: var(--text-muted); 
            font-size: 0.85rem; 
            margin-bottom: 10px;
        }

        .powered-by {
            margin-top: 15px;
            font-size: 0.7rem;
            color: rgba(255, 255, 255, 0.4);
            letter-spacing: 1px;
        }

        .powered-by a {
            color: var(--electric-blue);
            text-decoration: none;
            font-weight: bold;
            transition: 0.3s;
        }

        .powered-by a:hover {
            text-shadow: 0 0 10px var(--electric-glow);
        }

        /* --- PANEL ADMIN --- */
        .admin-panel { 
            background: rgba(10, 20, 30, 0.95);
            backdrop-filter: var(--glass-blur);
            border: 1px solid var(--glass-border);
            border-radius: 20px; 
            padding: 20px;
            box-shadow: 0 0 30px var(--electric-glow);
        }
        
        .tab-menu { 
            display: flex; 
            gap: 5px; 
            margin-bottom: 20px; 
            border-bottom: 1px solid var(--glass-border);
            overflow-x: auto;
            scrollbar-width: none;
        }

        .tab-menu::-webkit-scrollbar { display: none; }
        
        .tab { 
            padding: 10px 15px; 
            cursor: pointer; 
            border-radius: 10px 10px 0 0; 
            transition: 0.3s; 
            white-space: nowrap;
            color: var(--text-muted);
        }
        
        .tab.active { 
            background: rgba(0, 242, 255, 0.2);
            color: var(--electric-blue);
            font-weight: 600;
            box-shadow: 0 0 15px var(--electric-glow);
        }

        .input-glass { 
            width: 100%; 
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            color: white; 
            padding: 12px; 
            border-radius: 12px; 
            margin-bottom: 10px; 
            font-family: 'Poppins', sans-serif;
            transition: 0.3s;
        }
        
        .input-glass:focus { 
            outline: none; 
            border-color: var(--electric-blue);
            box-shadow: 0 0 15px var(--electric-glow);
        }

        .input-glass::placeholder {
            color: var(--text-muted);
        }

        textarea.input-glass { 
            resize: vertical; 
            min-height: 80px; 
        }

        /* TOAST NOTIFICATION */
        .toast { 
            position: fixed; 
            bottom: 80px; 
            left: 50%; 
            transform: translateX(-50%); 
            background: rgba(10, 20, 30, 0.95);
            backdrop-filter: var(--glass-blur);
            border: 1px solid var(--electric-blue);
            color: white; 
            padding: 15px 25px; 
            border-radius: 15px; 
            z-index: 300; 
            display: none;
            box-shadow: 0 0 25px var(--electric-glow);
        }
        
        .toast.show { display: block; }

        /* PAYMENT INFO */
        .payment-info { 
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--glass-border);
            border-radius: 15px; 
            padding: 15px; 
            margin: 10px 0;
        }
        
        .payment-info h4 { 
            color: var(--electric-blue);
            margin-bottom: 10px; 
            font-size: 0.9rem;
        }
        
        .payment-info p { 
            font-size: 0.85rem; 
            color: var(--text-muted); 
            word-break: break-all;
            margin: 5px 0;
        }

        /* Checkbox personalizado */
        input[type="checkbox"] {
            accent-color: var(--electric-blue);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .grid { 
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); 
                gap: 15px; 
            }
            
            .product-img-container { 
                height: 180px; 
            }

            .logo-text {
                font-size: 1rem;
            }

            .modal-content {
                max-width: 95%;
            }
        }
    </style>
</head>
<body>
    <!-- Orbes de Fondo -->
    <div class="background-orb orb-1"></div>
    <div class="background-orb orb-2"></div>

    <!-- HEADER -->
    <header>
        <div class="logo-container">
            <img src="https://i.ibb.co/Y4yVWpZd/1logo-gold.png" alt="EzDenniz Shop" class="logo-img">
            <div>
                <div class="logo-text">EzDenniz Shop</div>
                <div class="logo-subtitle">Style & Essence</div>
            </div>
        </div>
        <div class="header-icons">
            <i class="fas fa-cog" onclick="openAdmin()" title="Admin"></i>
            <i class="fas fa-shopping-cart" onclick="openCart()" style="position:relative">
                <span class="cart-count" id="cartCount">0</span>
            </i>
        </div>
    </header>

    <!-- CONTENIDO PRINCIPAL -->
    <div class="container">
        <!-- Filtros de Categor√≠a -->
        <div class="filters" id="filters"></div>

        <!-- Grid de Productos -->
        <div class="grid" id="productGrid"></div>
    </div>

    <!-- FOOTER -->
    <footer id="footer">
        <div class="footer-socials" id="footerSocials"></div>
        <div class="footer-text">¬© 2026 EzDenniz Shop - Style & Essence</div>
        <div class="powered-by">
            powered by <a href="https://wa.me/584228745777?text=Estoy%20interesado%20en%20sus%20servicios%20digitales" target="_blank">gabora646</a>
        </div>
    </footer>

    <!-- MODAL DETALLE PRODUCTO -->
    <div class="modal" id="productModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title" id="modalProductName"></div>
                <button class="close-btn" onclick="closeModal('productModal')">‚úï</button>
            </div>
            <div class="modal-body">
                <div class="image-gallery">
                    <div id="galleryImages"></div>
                    <button class="gallery-nav prev" onclick="changeImage(-1)">‚Äπ</button>
                    <button class="gallery-nav next" onclick="changeImage(1)">‚Ä∫</button>
                </div>
                <div class="gallery-dots" id="galleryDots"></div>
                <div class="product-detail-price" id="modalPrice"></div>
                <div class="product-desc" id="modalDesc"></div>
                <div id="variantSelectors"></div>
                <button class="btn-primary" onclick="addToCartFromModal()">
                    <i class="fas fa-shopping-cart"></i> AGREGAR AL CARRITO
                </button>
            </div>
        </div>
    </div>

    <!-- MODAL CARRITO -->
    <div class="modal" id="cartModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">üõí MI CARRITO</div>
                <button class="close-btn" onclick="closeModal('cartModal')">‚úï</button>
            </div>
            <div class="modal-body">
                <div id="cartItems"></div>
                <div class="cart-summary">
                    <div class="cart-total">
                        <span>TOTAL:</span>
                        <span class="total-amount" id="cartTotal">$0.00</span>
                    </div>
                    <button class="btn-primary" onclick="checkout()">
                        <i class="fab fa-whatsapp"></i> FINALIZAR PEDIDO
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL CHECKOUT -->
    <div class="modal" id="checkoutModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">üí≥ FINALIZAR COMPRA</div>
                <button class="close-btn" onclick="closeModal('checkoutModal')">‚úï</button>
            </div>
            <div class="modal-body">
                <input type="text" id="userName" placeholder="Tu Nombre Completo" class="input-glass">
                <input type="tel" id="userPhone" placeholder="Tu Tel√©fono (WhatsApp)" class="input-glass">
                <textarea id="userAddress" placeholder="Direcci√≥n de Entrega" class="input-glass"></textarea>
                
                <div class="payment-info">
                    <h4>üí∞ DATOS DE PAGO</h4>
                    <div id="paymentDetails"></div>
                </div>

                <button class="btn-primary" onclick="sendOrder()">
                    <i class="fab fa-whatsapp"></i> ENVIAR PEDIDO POR WHATSAPP
                </button>
                <button class="btn-secondary" onclick="closeModal('checkoutModal')">CANCELAR</button>
            </div>
        </div>
    </div>

    <!-- MODAL ADMIN -->
    <div class="modal" id="adminModal">
        <div class="modal-content" style="max-width:700px">
            <div class="modal-header">
                <div class="modal-title">‚öôÔ∏è PANEL ADMIN</div>
                <button class="close-btn" onclick="closeModal('adminModal')">‚úï</button>
            </div>
            <div class="modal-body">
                <!-- LOGIN -->
                <div id="adminLogin">
                    <input type="password" id="adminPass" placeholder="Contrase√±a Admin" class="input-glass">
                    <button class="btn-primary" onclick="loginAdmin()">ACCEDER</button>
                </div>

                <!-- DASHBOARD -->
                <div id="adminDashboard" style="display:none">
                    <div class="admin-panel">
                        <div class="tab-menu">
                            <div class="tab active" onclick="switchAdminTab('products')">Productos</div>
                            <div class="tab" onclick="switchAdminTab('add')">Agregar/Editar</div>
                            <div class="tab" onclick="switchAdminTab('config')">Configuraci√≥n</div>
                        </div>

                        <!-- TAB: LISTA PRODUCTOS -->
                        <div id="tab-products">
                            <div id="adminProductList"></div>
                        </div>

                        <!-- TAB: AGREGAR/EDITAR -->
                        <div id="tab-add" style="display:none">
                            <input type="hidden" id="editProductId">
                            <input type="text" id="prodName" placeholder="Nombre del Producto" class="input-glass">
                            <input type="number" id="prodPrice" placeholder="Precio (USD)" class="input-glass" step="0.01">
                            <select id="prodCategory" class="input-glass" onchange="renderAttributeInputs()">
                                <option value="clothing">Ropa</option>
                                <option value="shoes">Calzado</option>
                                <option value="perfume">Perfumes</option>
                                <option value="makeup">Maquillaje</option>
                                <option value="accessories">Accesorios</option>
                            </select>
                            <textarea id="prodDesc" placeholder="Descripci√≥n" class="input-glass"></textarea>
                            <textarea id="prodImages" placeholder="URLs de Im√°genes (separadas por comas)" class="input-glass"></textarea>
                            
                            <div id="dynamicAttributes"></div>

                            <div style="display:flex; gap:15px; margin:10px 0">
                                <label style="display:flex; align-items:center; gap:8px; cursor:pointer">
                                    <input type="checkbox" id="prodNew">
                                    <span>Nuevo</span>
                                </label>
                                <label style="display:flex; align-items:center; gap:8px; cursor:pointer">
                                    <input type="checkbox" id="prodStock" checked>
                                    <span>En Stock</span>
                                </label>
                            </div>

                            <button class="btn-primary" onclick="saveProduct()">GUARDAR PRODUCTO</button>
                            <button class="btn-secondary" onclick="clearForm()">LIMPIAR</button>
                        </div>

                        <!-- TAB: CONFIGURACI√ìN -->
                        <div id="tab-config" style="display:none">
                            <h4 style="color:var(--electric-blue); margin-bottom:15px">üîó API JSONBin</h4>
                            <input type="text" id="cfgBinId" placeholder="Bin ID" class="input-glass">
                            <input type="text" id="cfgApiKey" placeholder="API Key" class="input-glass">
                            <input type="text" id="cfgImgbbKey" placeholder="ImgBB Key (opcional)" class="input-glass">

                            <h4 style="color:var(--electric-blue); margin:20px 0 15px">üí≥ DATOS DE PAGO</h4>
                            <input type="text" id="cfgPayTransfer" placeholder="Transferencia Bancaria" class="input-glass">
                            <input type="text" id="cfgPayUsdt" placeholder="Direcci√≥n USDT" class="input-glass">
                            <input type="text" id="cfgPayPaypal" placeholder="Email PayPal" class="input-glass">

                            <h4 style="color:var(--electric-blue); margin:20px 0 15px">üì± REDES SOCIALES</h4>
                            <div style="margin-bottom:10px">
                                <label style="display:flex; align-items:center; gap:8px; margin-bottom:5px">
                                    <input type="checkbox" id="checkInsta">
                                    <span>Instagram</span>
                                </label>
                                <input type="text" id="socialInsta" placeholder="URL Instagram" class="input-glass">
                            </div>
                            <div style="margin-bottom:10px">
                                <label style="display:flex; align-items:center; gap:8px; margin-bottom:5px">
                                    <input type="checkbox" id="checkTiktok">
                                    <span>TikTok</span>
                                </label>
                                <input type="text" id="socialTiktok" placeholder="URL TikTok" class="input-glass">
                            </div>
                            <div style="margin-bottom:10px">
                                <label style="display:flex; align-items:center; gap:8px; margin-bottom:5px">
                                    <input type="checkbox" id="checkFb">
                                    <span>Facebook</span>
                                </label>
                                <input type="text" id="socialFb" placeholder="URL Facebook" class="input-glass">
                            </div>

                            <button class="btn-primary" onclick="saveConfig()">GUARDAR CONFIGURACI√ìN</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- TOAST NOTIFICATIONS -->
    <div class="toast" id="toast">
        <span></span>
    </div>

    <script>
        // --- CONFIGURACI√ìN Y DATOS ---
        let products = [
            {id:1,name:"Perfume Dior Sauvage",price:85,category:"perfume",images:["https://i.imgur.com/4L6X5Qj.png"],desc:"Fragancia fresca y especiada",attributes:{Volumen:["60ml","100ml"]},isNew:true,inStock:true},
            {id:2,name:"Zapatillas Nike Air",price:120,category:"shoes",images:["https://via.placeholder.com/300"],desc:"Comodidad y estilo",attributes:{Talla:["38","39","40","41"],Horma:["Normal","Ancha"]},isNew:false,inStock:true},
            {id:3,name:"Camisa Elegante",price:45,category:"clothing",images:["https://via.placeholder.com/300"],desc:"100% algod√≥n",attributes:{Talla:["S","M","L","XL"]},isNew:false,inStock:false}
        ];

        let cart = JSON.parse(localStorage.getItem('butic_cart')) || [];
        let currentCategory = 'all';
        let currentProduct = null;
        let currentImageIndex = 0;

        const config = {
            binId: localStorage.getItem('butic_binId') || '',
            apiKey: localStorage.getItem('butic_apiKey') || '',
            imgbbKey: localStorage.getItem('butic_imgbbKey') || '',
            paymentInfo: JSON.parse(localStorage.getItem('butic_paymentInfo') || '{"transferencia":"","usdt":"","paypal":""}'),
            socials: JSON.parse(localStorage.getItem('butic_socials') || '{"instagram":{"url":"","enabled":false},"tiktok":{"url":"","enabled":false},"facebook":{"url":"","enabled":false}}'),
            theme: JSON.parse(localStorage.getItem('butic_theme') || '{"primaryColor":"#00f2ff","accentColor":"#ffb400"}')
        };

        // --- INICIALIZACI√ìN ---
        window.onload = () => {
            loadConfig();
            renderCategories();
            renderProducts(products);
            renderFooter();
            updateCartCount();
            if(config.binId && config.apiKey) fetchData();
        };

        function loadConfig() {
            document.getElementById('cfgBinId').value = config.binId;
            document.getElementById('cfgApiKey').value = config.apiKey;
            document.getElementById('cfgImgbbKey').value = config.imgbbKey;
            document.getElementById('cfgPayTransfer').value = config.paymentInfo.transferencia;
            document.getElementById('cfgPayUsdt').value = config.paymentInfo.usdt;
            document.getElementById('cfgPayPaypal').value = config.paymentInfo.paypal;
            document.getElementById('socialInsta').value = config.socials.instagram.url;
            document.getElementById('checkInsta').checked = config.socials.instagram.enabled;
            document.getElementById('socialTiktok').value = config.socials.tiktok.url;
            document.getElementById('checkTiktok').checked = config.socials.tiktok.enabled;
            document.getElementById('socialFb').value = config.socials.facebook.url;
            document.getElementById('checkFb').checked = config.socials.facebook.enabled;
            loadTheme();
        }

        function loadTheme() {
            document.documentElement.style.setProperty('--primary-color', config.theme.primaryColor);
            document.documentElement.style.setProperty('--accent-color', config.theme.accentColor);
        }

        // --- RENDERIZADO ---
        function renderCategories() {
            const cats = ['all', ...new Set(products.map(p => p.category))];
            const labels = {
                all: 'Todos',
                clothing: 'Ropa',
                shoes: 'Calzado',
                perfume: 'Perfumes',
                makeup: 'Maquillaje',
                accessories: 'Accesorios'
            };
            
            document.getElementById('filters').innerHTML = cats.map(c => 
                `<button class="filter-btn ${c === currentCategory ? 'active' : ''}" onclick="filterCategory('${c}')">${labels[c]||c}</button>`
            ).join('');
        }

        function filterCategory(cat) {
            currentCategory = cat;
            renderCategories();
            const filtered = cat === 'all' ? products : products.filter(p => p.category === cat);
            renderProducts(filtered);
        }

        function renderProducts(items) {
            const isAdmin = isAdminMode();
            const visible = isAdmin ? items : items.filter(p => p.inStock);
            
            document.getElementById('productGrid').innerHTML = visible.map(p => `
                <div class="product-card" onclick="openProductModal(${p.id})">
                    ${p.isNew ? '<div class="badge-new">NUEVO</div>' : ''}
                    ${!p.inStock ? '<div class="badge-sold">AGOTADO</div>' : ''}
                    <div class="product-img-container">
                        <img src="${p.images[0]}" alt="${p.name}" class="product-img">
                    </div>
                    <div class="product-info">
                        <div class="product-name">${p.name}</div>
                        <div class="product-price">$${p.price.toFixed(2)}</div>
                        ${p.inStock ? '<button class="btn-add-cart" onclick="event.stopPropagation(); quickAddToCart('+p.id+')"><i class="fas fa-cart-plus"></i> AGREGAR</button>' : ''}
                    </div>
                </div>
            `).join('');
        }

        function renderFooter() {
            let socials = '';
            if(config.socials.instagram.enabled && config.socials.instagram.url) 
                socials += `<a href="${config.socials.instagram.url}" class="social-btn" target="_blank"><i class="fab fa-instagram"></i></a>`;
            if(config.socials.tiktok.enabled && config.socials.tiktok.url) 
                socials += `<a href="${config.socials.tiktok.url}" class="social-btn" target="_blank"><i class="fab fa-tiktok"></i></a>`;
            if(config.socials.facebook.enabled && config.socials.facebook.url) 
                socials += `<a href="${config.socials.facebook.url}" class="social-btn" target="_blank"><i class="fab fa-facebook-f"></i></a>`;
            
            document.getElementById('footerSocials').innerHTML = socials || '<p style="color:var(--text-muted)">S√≠guenos en redes sociales</p>';
        }

        // --- MODAL PRODUCTO ---
        function openProductModal(id) {
            currentProduct = products.find(p => p.id === id);
            if(!currentProduct) return;
            
            currentImageIndex = 0;
            document.getElementById('modalProductName').innerText = currentProduct.name;
            document.getElementById('modalPrice').innerText = `$${currentProduct.price.toFixed(2)}`;
            document.getElementById('modalDesc').innerText = currentProduct.desc || 'Sin descripci√≥n';
            
            // Galer√≠a
            document.getElementById('galleryImages').innerHTML = currentProduct.images.map((img, i) => 
                `<img src="${img}" class="gallery-img ${i===0?'active':''}" alt="${currentProduct.name}">`
            ).join('');
            
            document.getElementById('galleryDots').innerHTML = currentProduct.images.map((_, i) => 
                `<div class="dot ${i===0?'active':''}" onclick="setImage(${i})"></div>`
            ).join('');
            
            // Variantes
            let variants = '';
            for(let key in currentProduct.attributes) {
                variants += `
                    <div class="variant-section">
                        <div class="variant-label">${key}:</div>
                        <div class="variant-options" data-variant="${key}">
                            ${currentProduct.attributes[key].map((v, i) => 
                                `<button class="variant-btn ${i===0?'selected':''}" onclick="selectVariant('${key}', '${v}')">${v}</button>`
                            ).join('')}
                        </div>
                    </div>
                `;
            }
            document.getElementById('variantSelectors').innerHTML = variants;
            
            document.getElementById('productModal').classList.add('active');
        }

        function changeImage(dir) {
            const imgs = document.querySelectorAll('.gallery-img');
            currentImageIndex = (currentImageIndex + dir + imgs.length) % imgs.length;
            setImage(currentImageIndex);
        }

        function setImage(idx) {
            currentImageIndex = idx;
            document.querySelectorAll('.gallery-img').forEach((img, i) => {
                img.classList.toggle('active', i === idx);
            });
            document.querySelectorAll('.gallery-dots .dot').forEach((dot, i) => {
                dot.classList.toggle('active', i === idx);
            });
        }

        function selectVariant(key, value) {
            const container = document.querySelector(`[data-variant="${key}"]`);
            container.querySelectorAll('.variant-btn').forEach(btn => {
                btn.classList.toggle('selected', btn.innerText === value);
            });
        }

        function addToCartFromModal() {
            if(!currentProduct || !currentProduct.inStock) return;
            
            const variants = {};
            document.querySelectorAll('.variant-section').forEach(section => {
                const key = section.querySelector('.variant-options').dataset.variant;
                const selected = section.querySelector('.variant-btn.selected');
                if(selected) variants[key] = selected.innerText;
            });

            const existing = cart.find(item => 
                item.id === currentProduct.id && 
                JSON.stringify(item.variants) === JSON.stringify(variants)
            );

            if(existing) {
                existing.qty++;
            } else {
                cart.push({
                    id: currentProduct.id,
                    name: currentProduct.name,
                    price: currentProduct.price,
                    image: currentProduct.images[0],
                    variants: variants,
                    qty: 1
                });
            }

            localStorage.setItem('butic_cart', JSON.stringify(cart));
            updateCartCount();
            showToast("‚úÖ Producto agregado al carrito");
            closeModal('productModal');
        }

        function quickAddToCart(id) {
            const product = products.find(p => p.id === id);
            if(!product || !product.inStock) return;

            const existing = cart.find(item => item.id === id && !Object.keys(item.variants).length);
            
            if(existing) {
                existing.qty++;
            } else {
                cart.push({
                    id: product.id,
                    name: product.name,
                    price: product.price,
                    image: product.images[0],
                    variants: {},
                    qty: 1
                });
            }

            localStorage.setItem('butic_cart', JSON.stringify(cart));
            updateCartCount();
            showToast("‚úÖ Agregado al carrito");
        }

        // --- CARRITO ---
        function updateCartCount() {
            const total = cart.reduce((sum, item) => sum + item.qty, 0);
            document.getElementById('cartCount').innerText = total;
        }

        function openCart() {
            if(cart.length === 0) {
                showToast("üõí El carrito est√° vac√≠o");
                return;
            }

            document.getElementById('cartItems').innerHTML = cart.map((item, idx) => {
                const variantText = Object.entries(item.variants).map(([k, v]) => `${k}: ${v}`).join(' | ');
                return `
                    <div class="cart-item">
                        <img src="${item.image}" class="cart-item-img" alt="${item.name}">
                        <div class="cart-item-info">
                            <div class="cart-item-name">${item.name}</div>
                            ${variantText ? `<div style="font-size:0.75rem; color:var(--text-muted)">${variantText}</div>` : ''}
                            <div class="cart-item-price">$${item.price.toFixed(2)}</div>
                            <div class="cart-item-qty">
                                <button class="qty-btn" onclick="updateQty(${idx}, -1)">-</button>
                                <span>${item.qty}</span>
                                <button class="qty-btn" onclick="updateQty(${idx}, 1)">+</button>
                                <button class="btn-remove" onclick="removeFromCart(${idx})">Eliminar</button>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');

            const total = cart.reduce((sum, item) => sum + (item.price * item.qty), 0);
            document.getElementById('cartTotal').innerText = `$${total.toFixed(2)}`;
            
            document.getElementById('cartModal').classList.add('active');
        }

        function updateQty(idx, delta) {
            cart[idx].qty += delta;
            if(cart[idx].qty <= 0) {
                cart.splice(idx, 1);
            }
            localStorage.setItem('butic_cart', JSON.stringify(cart));
            updateCartCount();
            openCart();
        }

        function removeFromCart(idx) {
            cart.splice(idx, 1);
            localStorage.setItem('butic_cart', JSON.stringify(cart));
            updateCartCount();
            if(cart.length === 0) {
                closeModal('cartModal');
            } else {
                openCart();
            }
        }

        // --- CHECKOUT ---
        function checkout() {
            let paymentHTML = '';
            if(config.paymentInfo.transferencia) 
                paymentHTML += `<p><strong>Transferencia:</strong> ${config.paymentInfo.transferencia}</p>`;
            if(config.paymentInfo.usdt) 
                paymentHTML += `<p><strong>USDT:</strong> ${config.paymentInfo.usdt}</p>`;
            if(config.paymentInfo.paypal) 
                paymentHTML += `<p><strong>PayPal:</strong> ${config.paymentInfo.paypal}</p>`;
            
            document.getElementById('paymentDetails').innerHTML = paymentHTML || '<p>No hay datos de pago configurados</p>';
            
            closeModal('cartModal');
            document.getElementById('checkoutModal').classList.add('active');
        }

        function sendOrder() {
            const name = document.getElementById('userName').value.trim();
            const phone = document.getElementById('userPhone').value.trim();
            const address = document.getElementById('userAddress').value.trim();

            if(!name || !phone || !address) {
                showToast("‚ö†Ô∏è Completa todos los campos");
                return;
            }

            let message = `*üõçÔ∏è NUEVO PEDIDO*\n\n`;
            message += `üë§ *Cliente:* ${name}\n`;
            message += `üì± *Tel√©fono:* ${phone}\n`;
            message += `üìç *Direcci√≥n:* ${address}\n\n`;
            message += `*üì¶ PRODUCTOS:*\n`;
            
            cart.forEach(item => {
                const variantText = Object.entries(item.variants).map(([k, v]) => `${k}: ${v}`).join(', ');
                message += `‚Ä¢ ${item.name} ${variantText ? '('+variantText+')' : ''} - Cant: ${item.qty} - $${(item.price * item.qty).toFixed(2)}\n`;
            });

            const total = cart.reduce((sum, item) => sum + (item.price * item.qty), 0);
            message += `\nüí∞ *TOTAL: $${total.toFixed(2)}*`;

            const whatsappUrl = `https://wa.me/584129750307?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');

            cart = [];
            localStorage.setItem('butic_cart', JSON.stringify(cart));
            updateCartCount();
            closeModal('checkoutModal');
            showToast("‚úÖ Pedido enviado por WhatsApp");
        }

        // --- SINCRONIZACI√ìN CON API ---
        async function fetchData() {
            showToast("üîÑ Sincronizando...");
            try {
                const res = await fetch(`https://api.jsonbin.io/v3/b/${config.binId}/latest`, { 
                    headers: { 'X-Master-Key': config.apiKey } 
                });
                if(res.ok) {
                    const data = await res.json();
                    
                    if(data.record.products) products = data.record.products;
                    if(data.record.paymentInfo) config.paymentInfo = data.record.paymentInfo;
                    if(data.record.socials) config.socials = data.record.socials;
                    if(data.record.theme) { config.theme = data.record.theme; loadTheme(); }
                    
                    renderProducts(products);
                    renderCategories();
                    renderFooter();
                }
            } catch (e) { showToast("‚ö†Ô∏è Usando datos locales"); }
        }

        function saveConfig() {
            config.binId = document.getElementById('cfgBinId').value;
            config.apiKey = document.getElementById('cfgApiKey').value;
            config.imgbbKey = document.getElementById('cfgImgbbKey').value;
            
            config.paymentInfo = {
                transferencia: document.getElementById('cfgPayTransfer').value,
                usdt: document.getElementById('cfgPayUsdt').value,
                paypal: document.getElementById('cfgPayPaypal').value
            };

            config.socials = {
                instagram: { url: document.getElementById('socialInsta').value, enabled: document.getElementById('checkInsta').checked },
                tiktok: { url: document.getElementById('socialTiktok').value, enabled: document.getElementById('checkTiktok').checked },
                facebook: { url: document.getElementById('socialFb').value, enabled: document.getElementById('checkFb').checked }
            };

            localStorage.setItem('butic_binId', config.binId);
            localStorage.setItem('butic_apiKey', config.apiKey);
            localStorage.setItem('butic_imgbbKey', config.imgbbKey);
            localStorage.setItem('butic_paymentInfo', JSON.stringify(config.paymentInfo));
            localStorage.setItem('butic_socials', JSON.stringify(config.socials));

            saveDataToCloud();
            renderFooter();
            showToast("‚úÖ Datos Guardados");
        }

        async function saveDataToCloud() {
            if (!config.binId || !config.apiKey) return;
            try {
                await fetch(`https://api.jsonbin.io/v3/b/${config.binId}`, {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json', 'X-Master-Key': config.apiKey },
                    body: JSON.stringify({ 
                        products: products, 
                        paymentInfo: config.paymentInfo, 
                        theme: config.theme, 
                        socials: config.socials 
                    })
                });
            } catch (e) { console.error("Error guardando en nube"); }
        }

        // --- FUNCIONES PANEL ADMIN ---
        function openAdmin() { document.getElementById('adminModal').classList.add('active'); }
        function closeModal(id) { document.getElementById(id).classList.remove('active'); }
        function isAdminMode() { return document.getElementById('adminDashboard').style.display === 'block'; }
        
        function loginAdmin() {
            if(document.getElementById('adminPass').value === "System32") {
                document.getElementById('adminLogin').style.display = 'none';
                document.getElementById('adminDashboard').style.display = 'block';
                renderAdminProducts();
                renderCategories();
                renderProducts(products); 
            } else showToast("Contrase√±a incorrecta");
        }

        function switchAdminTab(t) {
            document.querySelectorAll('.tab').forEach(x => x.classList.remove('active'));
            event.target.classList.add('active');
            ['products', 'add', 'config'].forEach(x => document.getElementById('tab-'+x).style.display = (x===t)?'block':'none');
        }

        function renderAdminProducts() {
            const list = document.getElementById('adminProductList');
            list.innerHTML = '';
            products.forEach(p => {
                list.innerHTML += `
                    <div style="display:flex; justify-content:space-between; padding:12px; background:rgba(255,255,255,0.05); margin-bottom:8px; border-radius:12px; border:1px solid var(--glass-border)">
                        <span style="color:${p.inStock?'white':'#ff4444'}">${p.name} ($${p.price})</span>
                        <div>
                            <i class="fas fa-edit" style="color:var(--electric-blue); margin-right:15px; cursor:pointer" onclick="editProduct(${p.id})"></i>
                            <i class="fas fa-trash" style="color:var(--gold-accent); cursor:pointer" onclick="deleteProduct(${p.id})"></i>
                        </div>
                    </div>`;
            });
        }

        function renderAttributeInputs(preset=null) {
            const cat = document.getElementById('prodCategory').value;
            const container = document.getElementById('dynamicAttributes');
            container.innerHTML = '';
            
            const mappings = {
                clothing: ['Talla'], 
                shoes: ['Talla', 'Horma'], 
                perfume: ['Volumen'],
                makeup: ['Tono'], 
                accessories: ['Color']
            };
            
            (mappings[cat] || ['Opci√≥n']).forEach(key => {
                const val = preset && preset[key] ? preset[key].join(', ') : '';
                container.innerHTML += `<input type="text" class="input-glass attr-input" data-key="${key}" placeholder="${key} (sep. por comas)" value="${val}">`;
            });
        }

        function saveProduct() {
            const id = document.getElementById('editProductId').value;
            const name = document.getElementById('prodName').value;
            const price = parseFloat(document.getElementById('prodPrice').value);
            const category = document.getElementById('prodCategory').value;
            const imagesRaw = document.getElementById('prodImages').value;
            
            if(!name || !price) return showToast("Faltan datos");

            let attrs = {};
            document.querySelectorAll('.attr-input').forEach(i => {
                const val = i.value.split(',').map(s=>s.trim()).filter(s=>s!=='');
                if(val.length) attrs[i.dataset.key] = val;
            });

            const newProd = {
                id: id ? parseInt(id) : Date.now(),
                name, price, category, 
                images: imagesRaw.split(',').map(s=>s.trim()).filter(s=>s!==''),
                desc: document.getElementById('prodDesc').value,
                attributes: attrs,
                isNew: document.getElementById('prodNew').checked,
                inStock: document.getElementById('prodStock').checked
            };

            if(id) products[products.findIndex(p=>p.id==id)] = newProd;
            else products.push(newProd);

            saveDataToCloud();
            clearForm();
            switchAdminTab('products');
            renderAdminProducts();
            renderCategories();
            renderProducts(products);
        }

        function editProduct(id) {
            const p = products.find(x => x.id === id);
            document.getElementById('editProductId').value = p.id;
            document.getElementById('prodName').value = p.name;
            document.getElementById('prodPrice').value = p.price;
            document.getElementById('prodCategory').value = p.category;
            document.getElementById('prodImages').value = p.images.join(', ');
            document.getElementById('prodDesc').value = p.desc;
            document.getElementById('prodNew').checked = p.isNew;
            document.getElementById('prodStock').checked = p.inStock;
            renderAttributeInputs(p.attributes);
            switchAdminTab('add');
        }

        function deleteProduct(id) {
            if(confirm("¬øEliminar este producto?")) {
                products = products.filter(p => p.id !== id);
                saveDataToCloud();
                renderAdminProducts();
                renderCategories();
                renderProducts(products);
            }
        }

        function clearForm() {
            document.getElementById('editProductId').value = '';
            document.querySelectorAll('#tab-add input:not([type=checkbox]):not([type=file]), #tab-add textarea').forEach(i => i.value='');
            renderAttributeInputs();
        }

        function showToast(msg) {
            const t = document.getElementById('toast');
            t.querySelector('span').innerText = msg;
            t.classList.add('show');
            setTimeout(() => t.classList.remove('show'), 3000);
        }
    </script>
</body>
</html>
